<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <link
      type="text/css"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Noto+Sans+KR"
    />
    <link type="text/css" rel="stylesheet" href="./css/layout.css" />
    <link type="text/css" rel="stylesheet" href="./css/style.css" />
  </head>

  <body>
    <a href="#gnb" class="skipToContent">주메뉴 바로가기</a>
    <a href="#content" class="skipToContent">본문 바로가기</a>
    <div id="wrap" class="wrap"></div>
    <div id="header" class="header">
      <div class="inner">
        <h1 class="logo">
          <a href="http://">
            <span class="he">좌측상단사이트명,로고</span>
          </a>
        </h1>
        <nav id="gnb" aria-label="메인 메뉴" class="gnb">
          <div class="mobGnbHead">
            <div class="logoImg">
              <a href="http://">
                <img src="logo.img" alt="사이트명" />
              </a>
            </div>
            <div class="mobHeadUtil">
              <button type="button" aria-label="메뉴닫기" class="btnMobClose">
                <i class="icon"></i>
              </button>
            </div>
          </div>
          <div class="utilWrap"></div>
        </nav>
        <div class="btnUtil">
          <button type="button" aria-label="메뉴열기" class="btnMobOpen">
            <i class="icon"></i>
          </button>
        </div>
      </div>
    </div>
    <!--container-->
    <div class="container">
      <main id="content" class="content">
        <div class="exhibit_wrap">
          <h2 style="display: none">예약</h2>
          <div class="prd_view_wrap">
            <div id="body">
              <div class="prd_info_wrap">
                <div class="prd_info_wrap">
                  <div class="thumb">
                    <img
                      src="https://booking.mmca.go.kr/Down/Perf/202303/seoul_1.png"
                      alt="서울 통합관람권"
                    />
                  </div>
                  <div class="prd_info">
                    <div class="title">
                      <!---->
                      <h3><em>[영천]</em> <strong>프로그램명</strong></h3>
                    </div>
                    <dl>
                      <dt>체험기간</dt>
                      <dd>2023.5.26.-2023.7.16.</dd>
                      <dt>체험시간</dt>
                      <dd>
                        월,화,수,목,금:&nbsp;10:00-18:00<br />수,토&nbsp;야간개장:&nbsp;10:00-21:00
                      </dd>
                      <dt>체험장소</dt>
                      <dd>2,&nbsp;3,&nbsp;4,&nbsp;5&nbsp;,6,&nbsp;7&nbsp;</dd>
                      <dt>가격</dt>
                      <dd>5,000원</dd>
                      <dt>문의</dt>
                      <dd>031-280-9500</dd>
                    </dl>
                  </div>
                </div>
              </div>
              <div class="prd_detail_wrap">
                <div class="prd_detail_txt">
                  <div class="txt_box">
                    <h4>프로그램 개요</h4>
                    <div>
                      <p></p>
                      <div></div>
                      <p></p>
                    </div>
                  </div>
                  <div class="txt_box">
                    <h4>예약 및 체험 안내</h4>
                    <div></div>
                  </div>
                  <div class="txt_box">
                    <h4>예약 취소 안내</h4>
                    <div></div>
                  </div>
                  <div class="txt_box">
                    <h4>환불정책</h4>
                    <div></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="prd_detail_wrap">
              <div class="prd_detail_txt">
                <div class="txt_box" v-if="VenueDetails">
                  <h4>장소</h4>
                  <div style="overflow-x: hidden">
                    <!--카카오맵-약도서비스-->
                    <!--약도 노드-->
                    <div id="" class="root_daum_roughmap" style="width: 640px">
                      <div class="wrap_map" style="height: 360px"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div id="detailStatus" class="prd_perf_wrap fixed;">
              <div class="pcOnly">
                <!---->
                <div class="month_wrap">
                  <div class="wrap_date">
                    <strong class="date">2023.5</strong>
                    <a href="#none" class="date_prev month_prev"
                      ><span class="icon_arrow">이전 달</span></a
                    >
                    <a href="#none" class="date_next month_next"
                      ><span class="icon_arrow">다음 달</span></a
                    >
                  </div>
                  <div class="wrap_calender">
                    <table class="table_calendar">
                      <caption>
                        예약날짜선택
                      </caption>
                      <colgroup>
                        <col style="width: 14%" />
                        <col style="width: 14%" />
                        <col style="width: 14%" />
                        <col style="width: 14%" />
                        <col style="width: 14%" />
                        <col style="width: 14%" />
                        <col style="width: 14%" />
                      </colgroup>
                      <thead>
                        <tr>
                          <th scope="col" class="sun">
                            <div>일</div>
                          </th>
                          <th scope="col">
                            <div>월</div>
                          </th>
                          <th scope="col">
                            <div>화</div>
                          </th>
                          <th scope="col">
                            <div>수</div>
                          </th>
                          <th scope="col">
                            <div>목</div>
                          </th>
                          <th scope="col">
                            <div>금</div>
                          </th>
                          <th scope="col" class="sat">
                            <div>토</div>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td class="">
                            <!---->
                            <!---->
                            <a></a>
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="1일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>1</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="2일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>2</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="3일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>3</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="4일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>4</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="5일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>5</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="6일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>6</span></a
                            >
                            <!---->
                          </td>
                        </tr>
                        <tr>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="7일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>7</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="8일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>8</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="9일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>9</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="10일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>10</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="11일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>11</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="12일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>12</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="13일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>13</span></a
                            >
                            <!---->
                          </td>
                        </tr>
                        <tr>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="14일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>14</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="15일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>15</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="16일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>16</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="17일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>17</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="18일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>18</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="19일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>19</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="20일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>20</span></a
                            >
                            <!---->
                          </td>
                        </tr>
                        <tr>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="21일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>21</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="22일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>22</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="23일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>23</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="24일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>24</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="25일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>25</span></a
                            >
                            <!---->
                          </td>
                          <td class="ca_ing">
                            <a
                              href="#none"
                              title="26일 예약 가능한 날짜 입니다."
                              ><span>26</span></a
                            >
                            <!---->
                            <!---->
                          </td>
                          <td class="ca_ing">
                            <a
                              href="#none"
                              title="27일 예약 가능한 날짜 입니다."
                              ><span>27</span></a
                            >
                            <!---->
                            <!---->
                          </td>
                        </tr>
                        <tr>
                          <td class="ca_ing">
                            <a
                              href="#none"
                              title="28일 예약 가능한 날짜 입니다."
                              ><span>28</span></a
                            >
                            <!---->
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="29일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>29</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="30일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>30</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <a
                              href="#none"
                              title="31일 예약 불가능한 날짜 입니다."
                              style="cursor: text"
                              ><span>31</span></a
                            >
                            <!---->
                          </td>
                          <td class="">
                            <!---->
                            <!---->
                            <a></a>
                          </td>
                          <td class="">
                            <!---->
                            <!---->
                            <a></a>
                          </td>
                          <td class="">
                            <!---->
                            <!---->
                            <a></a>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div class="color_guide">
                      <ul>
                        <li><span class="color_ing"></span>관람일</li>
                        <li><span class="color_select"></span>선택일</li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div>
                  <!---->
                  <!---->
                </div>
              </div>
              <div class="btn_area">
                <!---->
                <!---->
                <button type="button" class="btn_other" style="cursor: text">
                  <span style="white-space: pre-line"
                    >관람 시간을 선택해 주세요.</span
                  >
                </button>
                <!---->
                <!---->
                <!---->
              </div>
            </div>
          </div>
          <script type="text/javascript">
            //예매서비스

            var detailStatus = new Vue({
              el: "#detailStatus",
              data: {
                PerformanceID: 107,
                StatusText: "예매하기",
                LinkUrl: null,
                BookingUrl: "https://www.mmca.go.kr/member/loginForm.do",
                IsBookable: true,
                SaleOpenTime: "",
                Notice: null,
                Year: 2023,
                Month: 5,
                MonthName: "5월",
                Weeks: [],
                SelectedDay: null,
                SelectedTime: null,
                IsNoPlayDate: false,
                IsNoPlayTime: false,
                IsPackageOnlyBookable: false,
                NotSelectedDayMessage: null,
                IsMobileScreen: false,
              },
              methods: {
                nextMonth: function () {
                  var nextMonth = moment(
                    moment()
                      .year(this.Year)
                      .month(this.Month - 1)
                      .date(1)
                  ).add(1, "M");
                  this.Year = nextMonth.year();
                  this.Month = nextMonth.month() + 1;
                  this.loadCalendar();
                },
                previousMonth: function () {
                  var previousMonth = moment(
                    moment()
                      .year(this.Year)
                      .month(this.Month - 1)
                      .date(1)
                  ).add(-1, "M");
                  this.Year = previousMonth.year();
                  this.Month = previousMonth.month() + 1;
                  this.loadCalendar();
                },
                loadCalendar: function () {
                  try {
                    this.NotSelectedDayMessage = "예매 가능한 일자가 없습니다";
                    this.SelectedDay = null;
                    this.SelectedTime = null;

                    axios
                      .get(
                        "/product/ko/performance/" +
                          this.PerformanceID +
                          "/calendar/" +
                          this.Year +
                          "/" +
                          this.Month,
                        {}
                      )
                      .then(
                        function (response) {
                          if (response.data.Code == 0) {
                            if (
                              detailStatus.Year ==
                                response.data.Calendar.Year &&
                              detailStatus.Month == response.data.Calendar.Month
                            ) {
                              detailStatus.Weeks = response.data.Calendar.Weeks;
                              detailStatus.MonthName =
                                response.data.Calendar.MonthName;

                              detailStatus.Weeks.forEach(function (
                                week,
                                index
                              ) {
                                week.forEach(function (day, position) {
                                  if (day && day.IsPlayDay == true)
                                    detailStatus.NotSelectedDayMessage =
                                      "관람 시간을 선택해 주세요.";
                                });
                              });
                            }
                          } else alert(response.data.Message);
                        },
                        function (error) {}
                      );
                  } catch (error) {}
                },
                loadTime: function (time) {
                  try {
                    if (this.IsBookable == true) {
                      this.SelectedTime = null;
                      axios
                        .get("/product/ko/performance/time/" + time.TimeID, {})
                        .then(
                          function (response) {
                            if (response.data.Code == 0) {
                              if (
                                time.TimeID == response.data.PlayTime.TimeID
                              ) {
                                time.IsBookable =
                                  response.data.PlayTime.IsBookable;
                                time.BookableStatusName =
                                  response.data.PlayTime.BookableStatusName;
                                time.Seats = response.data.PlayTime.Seats;
                                detailStatus.SelectedTime = time;
                              }
                            } else alert(response.data.Message);
                          },
                          function (error) {}
                        );
                    } else {
                      this.SelectedTime = time;
                    }
                  } catch (error) {}
                },
                clickDay: function (day) {
                  this.SelectedDay = day;
                  this.SelectedTime = null;
                  var selected = false;

                  this.SelectedDay.Times.forEach(function (time, index) {
                    if (selected == false) {
                      if (time.IsBookable == true) {
                        selected = true;
                        detailStatus.clickTime(time);
                      }
                    }
                  });

                  if (selected == false) {
                    if (this.SelectedDay.Times.length >= 1)
                      this.clickTime(this.SelectedDay.Times[0]);
                  }
                },
                clickTime: function (time) {
                  this.loadTime(time);
                },
                book: function () {
                  if (
                    this.IsMobileScreen == false &&
                    this.SelectedTime == null
                  ) {
                    alert("관람 시간을 선택해 주세요.");
                    return;
                  }

                  if (this.Notice != null) {
                    if (confirm(this.Notice) == false) return;
                  }

                  if (
                    this.BookingUrl.toLowerCase().indexOf("saleprocess") == -1
                  ) {
                    location.href = this.BookingUrl;
                  } else {
                    var url = this.BookingUrl;

                    if (this.IsMobileScreen == false)
                      url = url + "&IdTime=" + this.SelectedTime.TimeID;

                    NetFunnel_Action(
                      { action_id: "act_1" },
                      function (ev, ret) {
                        location.href = url + "&k=" + ret.data.key;
                      }
                    );
                  }
                },
                move: function () {
                  if (this.Notice != null) {
                    if (confirm(this.Notice) == false) return;
                  }

                  location.href = this.LinkUrl;
                },
              },
              mounted: function () {
                this.IsMobileScreen = window.$isMobileScreen();

                if (this.IsNoPlayDate == false) this.loadCalendar();

                setTimeout(function () {
                  if (detailStatus.Notice != null) {
                    if (detailStatus.Notice.indexOf("본인 인증") != -1) {
                      alert(detailStatus.Notice);
                      location.href = detailStatus.BookingUrl;
                    }
                  }
                }, 1000);
              },
            });

            $(document).ready(function () {
              //예매하기버튼
              function stickyBookingButton() {
                document_height = $(document).height(); // 문서 전체 높이
                document_scrollTop = $(document).scrollTop(); // 문서 전체 높이 중 스크롤 위치
                window_height = $(window).height(); // 창 높이
                footer_height = $(".footer").height();
                f_nav_height = $(".prd_perf_wrap").height();

                gap = document_height - window_height + f_nav_height;
                bottom = document_scrollTop - gap;

                if (document_scrollTop > gap) {
                  $(".prd_perf_wrap").css("bottom", bottom + "px");
                } else {
                  $(".prd_perf_wrap").css("bottom", "0px");
                }
              }

              //달력 고정
              function stickyCalendar() {
                var sticky = $(".prd_perf_wrap");
                var contents = $(".prd_view_wrap");

                var scrollTop = $(window).scrollTop();
                var contentsTop = contents.offset().top - 100;
                var contentsHeight = contents.height() - 300;
                var stickyHeight = sticky.height();

                if (scrollTop < contentsTop) {
                  sticky.removeClass("fixed").css("top", "0");
                } else {
                  if (scrollTop < contentsHeight) {
                    sticky
                      .removeClass("fixed")
                      .addClass("fixed")
                      .css("top", scrollTop - contentsTop);
                  }
                }
              }

              if (window.$isMobileScreen()) {
                $(window)
                  .scroll(stickyBookingButton)
                  .resize(stickyBookingButton);
              } else {
                $(window).scroll(stickyCalendar).resize(stickyCalendar);
              }
            });
          </script>
        </div>
      </main>
    </div>
  </body>
</html>
